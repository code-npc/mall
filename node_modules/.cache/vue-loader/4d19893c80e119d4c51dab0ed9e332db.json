{"remainingRequest":"D:\\MyVue\\supermall-master\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\MyVue\\supermall-master\\src\\views\\home\\Home.vue?vue&type=style&index=0&id=3dd2e005&scoped=true&lang=css&","dependencies":[{"path":"D:\\MyVue\\supermall-master\\src\\views\\home\\Home.vue","mtime":1646536715920},{"path":"D:\\MyVue\\supermall-master\\node_modules\\css-loader\\index.js","mtime":1646036755416},{"path":"D:\\MyVue\\supermall-master\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1646036753397},{"path":"D:\\MyVue\\supermall-master\\node_modules\\postcss-loader\\src\\index.js","mtime":1646036752199},{"path":"D:\\MyVue\\supermall-master\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1646036757043},{"path":"D:\\MyVue\\supermall-master\\node_modules\\vue-loader\\lib\\index.js","mtime":1646036752383}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n.tab-control{\n  position: relative;\n  z-index: 9;\n}\n\n#home {\n  /*padding-top: 44px;*/\n  height: 100vh;\n  position: relative;\n}\n\n.home-nav {\n  background-color: var(--color-tint);\n  color: #fff;\n\n/* 原生的网页滚动的时候，用下面这种方式固定 */\n  /* position: fixed;\n  left: 0;\n  right: 0;\n  top: 0;\n  z-index: 9; */\n}\n\n.content {\n  overflow: hidden;\n\n  position: absolute;\n  top: 44px;\n  bottom: 49px;\n  left: 0;\n  right: 0;\n}\n\n/*.content {*/\n/*height: calc(100% - 93px);*/\n/*overflow: hidden;*/\n/*margin-top: 44px;*/\n/*}*/\n",{"version":3,"sources":["Home.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmJA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA","file":"Home.vue","sourceRoot":"src\\views\\home","sourcesContent":["<template>\n  <div id=\"home\" class=\"wrapper\">\n    <nav-bar class=\"home-nav\"><div slot=\"center\">购物街</div></nav-bar>\n    <tab-control\n        class=\"tab-control\"\n        :titles=\"['流行', '新款', '精选']\"\n        @tabClick=\"tabClick\"\n        ref=\"tabControl1\" v-show=\"isfixed\"/>\n    <scroll\n      class=\"content\"\n      ref=\"scroll\"\n      :probe-type=\"3\"\n      @scroll=\"contentScroll\"\n      :pull-up-load=\"true\"\n      @pullingUp=\"loadMore\"\n    >\n      <home-swiper :banners=\"banners\"  @imglode=\"imglode\"/>\n      <recommend-view :recommends=\"recommends\" />\n      <feature-view />\n      <tab-control\n        :titles=\"['流行', '新款', '精选']\"\n        @tabClick=\"tabClick\"\n        ref=\"tabControl2\"/>\n      <good-list :goods=\"showGoods\" />\n    </scroll>\n    <back-top @click.native=\"backClick\" v-show=\"isShowBackTop\" />\n  </div>\n</template>\n\n<script>\nimport HomeSwiper from \"./childComps/HomeSwiper\";\nimport RecommendView from \"./childComps/RecommendView\";\nimport FeatureView from \"./childComps/FeatureView\";\n\nimport NavBar from \"components/common/navbar/NavBar\";\nimport TabControl from \"components/content/tabControl/TabControl\";\nimport GoodList from \"components/content/goods/GoodsList\";\nimport Scroll from \"components/common/scroll/Scroll\";\nimport BackTop from \"components/content/backTop/BackTop\";\n\nimport { getHomeMultidata, getHomeGoods } from \"network/home\";\n\nexport default {\n  name: \"Home\",\n  components: {\n    HomeSwiper,\n    RecommendView,\n    FeatureView,\n    NavBar,\n    TabControl,\n    GoodList,\n    Scroll,\n    BackTop,\n  },\n  data() {\n    return {\n      banners: [],\n      recommends: [],\n      goods: {\n        pop: { page: 0, list: [] },\n        new: { page: 0, list: [] },\n        sell: { page: 0, list: [] },\n      },\n      currentType: \"pop\",\n      isShowBackTop: false,\n      offsetTop: 0,\n      isfixed: false,\n      saveY: 0,\n    };\n  },\n  computed: {\n    showGoods() {\n      return this.goods[this.currentType].list;\n    },\n  },\n  activated () {\n    this.$refs.scroll.scrollTo(0,this.saveY,0)\n    this.$refs.scroll.scroll.refresh()\n  },\n  deactivated () {\n    this.saveY = this.$refs.scroll.scroll.y\n  },\n  created() {\n    // 1.请求多个数据\n    this.getHomeMultidata();\n\n    // 2.请求商品数据\n    this.getHomeGoods(\"pop\");\n    this.getHomeGoods(\"new\");\n    this.getHomeGoods(\"sell\");\n  },\n  \n  methods: {\n    /**\n     * 事件监听相关的方法\n     */\n    tabClick(index) {\n      switch (index) {\n        case 0:\n          this.currentType = \"pop\";\n          break;\n        case 1:\n          this.currentType = \"new\";\n          break;\n        case 2:\n          this.currentType = \"sell\";\n          break;\n      }\n      this.$refs.tabControl1.currentIndex = index\n      this.$refs.tabControl2.currentIndex = index\n    },\n    backClick() {\n      this.$refs.scroll.scrollTo(0, 0,500);\n    },\n    contentScroll(position) {\n      this.isShowBackTop = (-position.y) > 1000;\n      this.isfixed = (-position.y) > this.offsetTop;\n    },\n    loadMore() {\n      this.getHomeGoods(this.currentType);\n    },\n    imglode(){\n        this.offsetTop = this.$refs.tabControl2.$el.offsetTop\n    },\n    /**\n     * 网络请求相关的方法\n     */\n    getHomeMultidata() {\n      getHomeMultidata().then((res) => {\n        this.banners = res.data.banner.list;\n        this.recommends = res.data.recommend.list;\n      });\n    },\n    getHomeGoods(type) {\n      const page = this.goods[type].page + 1;\n      getHomeGoods(type, page).then((res) => {\n        this.goods[type].list.push(...res.data.list);\n        this.goods[type].page += 1;\n\n        this.$refs.scroll.finishPullUp();\n      });\n    },\n  },\n};\n</script>\n\n<style scoped>\n.tab-control{\n  position: relative;\n  z-index: 9;\n}\n\n#home {\n  /*padding-top: 44px;*/\n  height: 100vh;\n  position: relative;\n}\n\n.home-nav {\n  background-color: var(--color-tint);\n  color: #fff;\n\n/* 原生的网页滚动的时候，用下面这种方式固定 */\n  /* position: fixed;\n  left: 0;\n  right: 0;\n  top: 0;\n  z-index: 9; */\n}\n\n.content {\n  overflow: hidden;\n\n  position: absolute;\n  top: 44px;\n  bottom: 49px;\n  left: 0;\n  right: 0;\n}\n\n/*.content {*/\n/*height: calc(100% - 93px);*/\n/*overflow: hidden;*/\n/*margin-top: 44px;*/\n/*}*/\n</style>\n"]}]}